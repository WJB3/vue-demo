(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{692:function(t,e,a){},693:function(t,e,a){},694:function(t,e,a){},718:function(t,e,a){"use strict";var n=a(692);a.n(n).a},719:function(t,e,a){"use strict";var n=a(693);a.n(n).a},720:function(t,e,a){"use strict";var n=a(694);a.n(n).a},728:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-tabs",{staticClass:"a_tab",attrs:{type:"editable-card"},on:{edit:t.onEdit},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[a("a-tab-pane",{key:"list",attrs:{tab:"列表",closable:t.listClosable}},[a("div",{staticClass:"wrap_table"},[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.handleAddBrand}},[t._v("新建活动")]),t._v(" "),a("a-input-search",{staticClass:"search_input",attrs:{placeholder:"搜索..."}}),t._v(" "),a("i-table",{attrs:{data:t.data,pagination:t.pagination,loading:t.loading},on:{onEdit:t.handleEdit,onView:t.handleView}}),t._v(" "),a("i-modal",{attrs:{visible:t.visible}})],1)]),t._v(" "),t._l(t.panes,(function(e){return a("a-tab-pane",{key:e.key,attrs:{tab:e.title,closable:e.closable}},[a("div",{domProps:{innerHTML:t._s(e.content)}}),t._v(" "),e.isForm?a("i-form",{attrs:{current:t.current,type:t.type},on:{onAddSuccess:t.handleAddSuccess,onEditSuccess:t.handleEditSuccess}}):t._e()],1)}))],2)};n._withStripped=!0;var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("custom-table",{attrs:{data:t.data,pagination:t.pagination,loading:t.loading,columns:t.columns,size:"default",bordered:"",rowKey:"uuid"},on:{onEdit:t.handleEdit,onView:t.handleView,onDelete:t.handleDelete,onTableChange:t.handleTableChange}})};i._withStripped=!0;a(40),a(41);var r=a(17),s=a.n(r);a(37),a(35),a(38),a(39);function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var c={data:function(){return{searchInput:null,searchText:"",columns:[{title:"活动标题",dataIndex:"title",width:150,filter:!0},{title:"活动图片",dataIndex:"imgurl",width:500,filter:!0},{title:"正文",dataIndex:"texts",width:200,filter:!0},{title:"描述",dataIndex:"descs",width:200,filter:!0},{title:"操作",dataIndex:"action",key:"action",fixed:"right",width:170,action:!0}]}},components:{CustomTable:a(662).a},props:["data","pagination","loading"],methods:{filterData:function(t){var e={};return Object.keys(t).forEach((function(a){e[a]=t[a][0]})),e},handleTableChange:function(t,e,a){var n=this.filterData(e);this.$store.dispatch("activity/getList",function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach((function(e){s()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({page:t.current-1},n))},handleDelete:function(t){var e=this,a=new FormData;a.append("uuid",t.uuid),this.$confirm({title:"确定删除此品牌吗？",content:"品牌一旦删除不可恢复",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e.$store.dispatch("activity/delete",a)},onCancel:function(){}})},handleEdit:function(t){this.$emit("onEdit",t)},handleView:function(t){this.$emit("onView",t)}},mounted:function(){}},l=(a(718),a(13)),u=Object(l.a)(c,i,[],!1,null,null,null);u.options.__file="src/pages/activity/table.vue";var d=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:t.bordered}},[a("a-form",{attrs:{form:t.form}},[a("a-row",{attrs:{gutter:{md:8,lg:24,xl:48}}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"活动标题:","label-col":{span:24},"wrapper-col":{span:24}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入活动标题!"}],initialValue:t.current.title}],expression:"[\n              `title`,\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请输入活动标题!',\n                  },\n                  \n                ],\n                initialValue:current.title\n              },\n            ]"}],attrs:{disabled:t.disabled,placeholder:"请输入活动标题"}})],1)],1),t._v(" "),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"活动图片:","label-col":{span:24},"wrapper-col":{span:24}}},[a("file-uploader",{directives:[{name:"decorator",rawName:"v-decorator",value:["imgurl",{rules:[{required:!0,message:"请输入活动图片!"}],initialValue:t.current.imgurl}],expression:"[\n              `imgurl`,\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请输入活动图片!',\n                  },\n                ],\n                initialValue:current.imgurl\n              },\n            ]"}],attrs:{name:"活动图片"}})],1)],1)],1),t._v(" "),a("a-row",{attrs:{gutter:{md:8,lg:24,xl:48}}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"正文","label-col":{span:24},"wrapper-col":{span:24}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["texts",{rules:[{required:!0,message:"请输入正文!"}],initialValue:t.current.texts}],expression:"[\n              `texts`,\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请输入正文!',\n                  },\n                   \n                ],\n                initialValue:current.texts\n              },\n            ]"}],staticClass:"texts",attrs:{disabled:t.disabled}})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"描述","label-col":{span:24},"wrapper-col":{span:24}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["descs",{rules:[{required:!0,message:"请输入描述!"}],initialValue:t.current.descs}],expression:"[\n              `descs`,\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请输入描述!',\n                  },\n                   \n                ],\n                initialValue:current.descs\n              },\n            ]"}],staticClass:"descs",attrs:{disabled:t.disabled}})],1)],1)],1)],1),t._v(" "),a("footer-toolbar",[a("a-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.handleSubmit}},[t._v("确定")])],1)],1)};p._withStripped=!0;a(663);var m=a(665),h=a(667),v=a(664),f=(a(78),{data:function(){return{form:this.$form.createForm(this),imageUrl:this.current.imgurl?this.current.imgurl:"",loading:!1,headers:{},disabled:"VIEW"===this.type,bordered:!1}},components:{FooterToolbar:m.a,FileUploader:h.a,PopSelectBrand:v.a},mounted:function(){},props:["current","type"],methods:{customRequest:function(t){},handleSubmit:function(){var t=this;this.form.validateFields((function(e,a){if(!e){var n=a,i=t.current.uuid,r=new FormData;r.append("title",n.title),r.append("imgurl",n.imgurl),r.append("texts",n.texts),r.append("descs",n.descs),"ADD"===t.type?t.$store.dispatch("activity/add",r).then((function(e){console.log(e),e&&t.$emit("onAddSuccess")})):"EDIT"===t.type&&(console.log("EDIT"),r.append("uuid",i),t.$store.dispatch("activity/edit",r).then((function(e){e&&t.$emit("onEditSuccess")})))}}))}}}),b=(a(719),Object(l.a)(f,p,[],!1,null,null,null));b.options.__file="src/pages/activity/form.vue";var y=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"查看品牌"},on:{cancel:t.handleCancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("template",{slot:"footer"},[a("a-button",{on:{click:t.handleCancel}},[t._v("取消")])],1)],2)};g._withStripped=!0;var w={props:["visible"],mounted:function(){},methods:{handleCancel:function(){this.$store.commit("activity/updateState",{visible:!1})}}},_=Object(l.a)(w,g,[],!1,null,null,null);_.options.__file="src/pages/activity/modal.vue";var x=_.exports,T=a(22),E={data:function(){return{activeKey:"list",panes:[],listClosable:!1}},computed:Object(T.b)({data:function(t){return t.activity.data},pagination:function(t){return t.activity.pagination},type:function(t){return t.activity.type},current:function(t){return t.activity.current},visible:function(t){return t.activity.visible},loading:function(t){return t.activity.loading},searchText:function(t){return t.activity.searchText}}),components:{iTable:d,iForm:y,iModal:x},mounted:function(){this.getList()},methods:{getList:function(){this.$store.dispatch("activity/getList",{})},handleView:function(t){this.$store.commit("activity/updateState",{type:"VIEW",current:t});var e=this.panes;e.push({title:"查看活动",content:"<div></div>",key:"newTabForm",isForm:!0}),this.panes=e,this.activeKey="newTabForm"},handleEdit:function(t){this.$store.commit("activity/updateState",{type:"EDIT",current:t});var e=this.panes;e.push({title:"编辑活动",content:"<div></div>",key:"newTabForm",isForm:!0}),this.panes=e,this.activeKey="newTabForm"},handleAddBrand:function(){var t=this.panes;t.push({title:"添加活动",content:"<div></div>",key:"newTabForm",isForm:!0}),this.panes=t,this.activeKey="newTabForm"},onEdit:function(t,e){this["".concat(e,"Tab")](t)},addTab:function(){var t=this.panes,e="newTab".concat(this.newTabIndex++);t.push({title:"NEW Tab",content:"Content of new Tab",key:e}),this.panes=t,this.activeKey=e},handleAddSuccess:function(){this.$message.success("添加活动成功!"),this.removeTab("newTabForm")},handleEditSuccess:function(){this.$message.success("编辑活动成功!"),this.removeTab("newTabForm")},removeTab:function(t){var e,a=this.activeKey;this.panes.forEach((function(a,n){a.key===t&&(e=n-1)}));var n=this.panes.filter((function(e){return e.key!==t}));n.length&&a===t&&(e>=0?activekey=n[e].key:a="list"),0===n.length&&(a="list"),this.$store.commit("activity/updateState",{type:"ADD",current:{}}),this.panes=n,this.activeKey=a}}},k=(a(720),Object(l.a)(E,n,[],!1,null,"b82bf754",null));k.options.__file="src/pages/activity/index.vue";e.default=k.exports}}]);
//# sourceMappingURL=6.d6e91300d1cfcefc09e7.js.map